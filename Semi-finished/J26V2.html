<!DOCTYPE html><html lang="en">  <head>    <meta charset="UTF-8" />    <title>微博用户人际关系网</title>  </head>  <body>    <div id="container" style="height: 100vh; width: 100vw"></div>    <script src="https://gw.alipayobjects.com/os/antv/pkg/_antv.g6-3.7.1/dist/g6.min.js"></script>    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>    <script>    const container = document.getElementById('container');    const width = container.scrollWidth ;    const height = container.scrollHeight ;    $(function () {      $.getJSON("./data.json", data =>{        data.nodes.forEach(item =>{          const labelConfig = JSON.parse(item.label)          item.label = labelConfig.nick_name          item.desc = labelConfig          let r = 15          console.log(item.class)          switch (item.class){            case '0':              item.x = width /2              item.y = height/2              r = 5 + 15              break            case '1':              r = 5 + 10              break            case '2':              r = 5 + 9              break            case '3':              r = 5 + 8              break            case '4':              r = 5 + 7              break            case '5':              r = 5 + 6              break            case '6':              r = 5 + 5              break            case '7':              r = 5 + 4              break            case '8':              r = 5 + 3              break            case '9':              r = 5 + 2              break            case '10':              r = 5 + 1              break          }          item.size = r * 2,          item.clipCfg = {            show: true,            type: 'circle',            r: r          }        })        data.edges.forEach(item =>{          item.style = {            lineWidth: 0.65          }        })        const tooltip = new G6.Tooltip({          // offsetX 与 offsetY 需要加上父容器的 padding          offsetX: 70,          offsetY: 50,          // 允许出现 tooltip 的 item 类型          itemTypes: ['node'],          // 自定义 tooltip 内容          getContent: (e) => {            const outDiv = document.createElement('div');            outDiv.style.width = 'fit-content';            const descs = e.item.getModel().desc            //outDiv.style.padding = '0px 0px 20px 0px';            outDiv.innerHTML = `            <b>个人信息</b>            <ul>              <li>nick_name: ${descs.nick_name}</li>              <li>gender: ${descs.gender}</li>              <li>city: ${descs.city}</li>              <li>province: ${descs.province}</li>              <li>vip_level: ${descs.vip_level}</li>              <li>tweets_num: ${descs.tweets_num}</li>              <li>follows_num: ${descs.follows_num}</li>              <li>fans_num: ${descs.fans_num}</li>              <li>friendly: ${descs.friendly}</li>              <li>avg_fans: ${descs.avg_fans}</li>              <li>avg_follow: ${descs.avg_follow}</li>            </ul>`;                  return outDiv;                },        });        const toolbar = new G6.ToolBar();        const graph = new G6.Graph({          container: 'container',          width,          height,          plugins: [tooltip,toolbar],          modes: {            default: [               'activate-relations','drag-canvas', 'zoom-canvas', 'drag-node'            ],          },          layout: {            type: 'force',            center: [width/2,height/2],            preventOverlap: true,            linkDistance: 300,            nodeSpacing: (d) => {              return 3;            }            // onTick          },          defaultNode: {            type: 'image',            label: 'AntV Team',            labelCfg: {              style: {                fontSize: 8              }            },          },        });        graph.data({          nodes: data.nodes,          edges: data.edges.map(function (edge, i) {            edge.id = 'edge' + i;            return Object.assign({}, edge);          }),        });        graph.render();        const forceLayout = graph.get('layoutController').layoutMethod;        graph.on('node:dragstart', function (e) {          graph.layout();          refreshDragedNodePosition(e);        });        graph.on('node:drag', function (e) {          forceLayout.execute();          refreshDragedNodePosition(e);        });        graph.on('node:dragend', function (e) {          e.item.get('model').fx = null;          e.item.get('model').fy = null;        });        graph.on('node:mouseenter', e => {          graph.setItemState(e.item, 'active', true)        });        graph.on('node:mouseleave', e => {          graph.setItemState(e.item, 'active', false)        });        graph.on('afteractivaterelations', (e) => {          // 当前操作的节点 item          // console.log(e.item);          // 当前操作是选中(`'activate'`)还是取消选中(`'deactivate'`)          // console.log(e.action);        });      })    })      if (typeof window !== 'undefined'){        window.onresize = () => {          if (!graph || graph.get('destroyed')) return;          if (!container || !container.scrollWidth || !container.scrollHeight) return;          graph.changeSize(container.scrollWidth, container.scrollHeight);        };      }      function refreshDragedNodePosition(e) {        const model = e.item.get('model');        model.fx = e.x;        model.fy = e.y;      }      //判断图片是否存在      function CheckImgExists(imgurl) {        var ImgObj = new Image(); //判断图片是否存在        ImgObj.src = imgurl;        //存在图片        console.log(ImgObj)        if (ImgObj.fileSize > 0 || (ImgObj.width > 0 && ImgObj.height > 0)) {          console.log('图片地址有效')          return true;        } else {          console.log('图片地址无效')          return false;        }      }    </script>  </body></html>